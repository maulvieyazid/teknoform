/*
 *  Name : Navigation Mouse
 *  Description : Anywhere click navigation
 *  Version : 0.0.1
*/
THEASYS.theme.autoLoadFunction("navigation_mouse","init"),THEASYS.theme.modules.navigation_mouse.comingFromLoadedPanorama=!1,THEASYS.theme.modules.navigation_mouse.navigating=!1,THEASYS.theme.modules.navigation_mouse.initialized=!1,THEASYS.theme.modules.navigation_mouse.mouseLastCoords={x:0,y:0},THEASYS.theme.modules.navigation_mouse.mouse=0,THEASYS.theme.modules.navigation_mouse.mouse_perspective=1,THEASYS.theme.modules.navigation_mouse.mouse_titles=0,THEASYS.theme.modules.navigation_mouse.mouse_titles_texts={},THEASYS.theme.modules.navigation_mouse.mouse_titles_placement="top",THEASYS.theme.modules.navigation_mouse.mouse_titles_offsetX=0,THEASYS.theme.modules.navigation_mouse.mouse_titles_offsetY=0,THEASYS.theme.modules.navigation_mouse.mouse_dowiv=0,THEASYS.theme.modules.navigation_mouse.mouse_mode=0,THEASYS.theme.modules.navigation_mouse.mouse_auto_scale=0,THEASYS.theme.modules.navigation_mouse.mouse_auto_scale_start=.5,THEASYS.theme.modules.navigation_mouse.mouse_auto_scale_factor=.6,THEASYS.theme.modules.navigation_mouse.mouse_auto_scale_mode=0,THEASYS.theme.modules.navigation_mouse.mouse_scale=1,THEASYS.theme.modules.navigation_mouse.elem=null,THEASYS.theme.modules.navigation_mouse.elem_circle=null,THEASYS.theme.modules.navigation_mouse.elem_shape=null,THEASYS.theme.modules.navigation_mouse.elem_shadow=null,THEASYS.theme.modules.navigation_mouse.elem_text=null,THEASYS.theme.modules.navigation_mouse.init=function(){var e=THEASYS.renderer.vars.get("options");(~~THEASYS.renderer.vars.get("editing")||~~e.nav_mouse)&&(this.initialized=!0),THEASYS.renderer.vars.get("device.isMobile")&&(this.initialized=!1,this.eventsMobile()),this.initialized&&(THEASYS.theme.appendHtml('<div id="navigation_mouse"></div>',document.getElementById("viewer_wrapper")),this.elem=$("#navigation_mouse"),this.events(),this.process())},THEASYS.theme.modules.navigation_mouse.listenToEdits=function(e){for(var t in e)switch(t){case"nav_mouse_mode":var s=~~e[t];THEASYS.renderer.vars.set("options.nav_mouse_mode",s),this.mouse_mode=s,this.adjustMouse();break;case"nav_mouse_type":s=e[t];THEASYS.renderer.vars.set("options.nav_mouse_type",s),this.adjustMouse();break;case"nav_mouse_type_d":var o=(s=e[t]).split("|");$("#navigation_mouse").find("path").not(".pathaki-circle").attr("d",o[0]),$("#navigation_mouse").find("path.pathaki-circle").attr("d",o[1]),THEASYS.renderer.vars.set("options.nav_mouse_type_d",s),this.adjustMouse();break;case"nav_mouse_auto_scale":s=~~e[t];THEASYS.renderer.vars.set("options.nav_mouse_auto_scale",s),this.mouse_auto_scale=s,this.adjustMouse();break;case"nav_mouse_auto_scale_factor":s=parseFloat(e[t],10);THEASYS.renderer.vars.set("options.nav_mouse_auto_scale_factor",s),this.mouse_auto_scale_factor=s,this.adjustMouse();break;case"nav_mouse_auto_scale_mode":s=parseInt(e[t],10);THEASYS.renderer.vars.set("options.nav_mouse_auto_scale_mode",s),this.mouse_auto_scale_mode=s,this.adjustMouse();break;case"nav_mouse_scale":s=parseFloat(e[t],10);THEASYS.renderer.vars.set("options.nav_mouse_scale",s),this.mouse_scale=s,this.adjustMouse();break;case"nav_mouse_opacity":s=parseFloat(e[t],10);THEASYS.renderer.vars.set("options.nav_mouse_opacity",s),$("#navigation_mouse").find("path.pathaki-shape").attr("fill-opacity",s);break;case"nav_mouse_color":s=e[t];THEASYS.renderer.vars.set("options.nav_mouse_color",s),$("#navigation_mouse").find("path.pathaki-shape").attr("fill",s);break;case"nav_mouse_stroke_color":s=e[t];THEASYS.renderer.vars.set("options.nav_mouse_stroke_color",s),$("#navigation_mouse").find("path.pathaki-shape").attr("stroke",s);break;case"nav_mouse_stroke_width":s=~~e[t];THEASYS.renderer.vars.set("options.nav_mouse_stroke_width",s),$("#navigation_mouse").find("path.pathaki-shape").attr("stroke-width",s),this.adjustMouse();break;case"nav_mouse_shadow":s=~~e[t],o=THEASYS.renderer.vars.get("options.nav_mouse_type_d").split("|");$("#navigation_mouse").find("path.pathaki-shadow").attr("d",o[0]),s?$("#navigation_mouse").find('path[data-type="shadow"]').fadeIn():$("#navigation_mouse").find('path[data-type="shadow"]').fadeOut(),THEASYS.renderer.vars.set("options.nav_mouse_shadow",s);break;case"nav_mouse_shadow_opacity":s=parseFloat(e[t],10);THEASYS.renderer.vars.set("options.nav_mouse_shadow_opacity",s),$("#navigation_mouse").find("path.pathaki-shadow").attr("fill-opacity",s);break;case"nav_mouse_shadow_color":s=e[t];THEASYS.renderer.vars.set("options.nav_mouse_shadow_color",s),$("#navigation_mouse").find("path.pathaki-shadow").attr("fill",s);break;case"nav_mouse_circle":s=~~e[t],o=THEASYS.renderer.vars.get("options.nav_mouse_type_d").split("|");$("#navigation_mouse").find("path.pathaki-circle").attr("d",o[1]),s?$("#navigation_mouse").find('path[data-type="circle"]').fadeIn():$("#navigation_mouse").find('path[data-type="circle"]').fadeOut(),THEASYS.renderer.vars.set("options.nav_mouse_circle",s);break;case"nav_mouse_circle_opacity":s=parseFloat(e[t],10);THEASYS.renderer.vars.set("options.nav_mouse_circle_opacity",s),$("#navigation_mouse").find("path.pathaki-circle").attr("fill-opacity",s);break;case"nav_mouse_circle_color":s=e[t];THEASYS.renderer.vars.set("options.nav_mouse_circle_color",s),$("#navigation_mouse").find("path.pathaki-circle").attr("fill",s);break;case"nav_mouse_circle_stroke_color":s=e[t];THEASYS.renderer.vars.set("options.nav_mouse_circle_stroke_color",s),$("#navigation_mouse").find("path.pathaki-circle").attr("stroke",s);break;case"nav_mouse_circle_stroke_width":s=~~e[t];THEASYS.renderer.vars.set("options.nav_mouse_circle_stroke_width",s),$("#navigation_mouse").find("path.pathaki-circle").attr("stroke-width",s);break;case"nav_mouse_titles_text":s=~~e[t];this.mouse_titles_text=s,THEASYS.renderer.vars.set("options.nav_mouse_titles_text",s),this.process(),this.adjustMouse();break;case"nav_mouse_titles_placement":s=e[t];$("#navigation_mouse").find(".pathaki-text").css("color",s),THEASYS.renderer.vars.set("options.nav_mouse_titles_placement",s),this.mouse_titles_placement=s,this.adjustMouse();break;case"nav_mouse_titles_color":s=e[t];$("#navigation_mouse").find(".pathaki-text").css("color",s),THEASYS.renderer.vars.set("options.nav_mouse_titles_color",s);break;case"nav_mouse_titles_size":s=~~e[t];$("#navigation_mouse").find(".pathaki-text").css("font-size",s+"px"),this.adjustMouse(),THEASYS.renderer.vars.set("options.nav_mouse_titles_size",s);break;case"nav_mouse_titles_offsetX":s=~~e[t];this.mouse_titles_offsetX=s,this.adjustMouse(),THEASYS.renderer.vars.set("options.nav_mouse_titles_offsetX",s);break;case"nav_mouse_titles_offsetY":s=~~e[t];this.mouse_titles_offsetY=s,this.adjustMouse(),THEASYS.renderer.vars.set("options.nav_mouse_titles_offsetY",s);break;case"nav_mouse_titles_paddingX":var s=~~e[t],a=THEASYS.renderer.vars.get("options.nav_mouse_titles_paddingY");$("#navigation_mouse").find(".pathaki-text").css("padding",a+"px "+s+"px"),this.adjustMouse(),THEASYS.renderer.vars.set("options.nav_mouse_titles_paddingX",s);break;case"nav_mouse_titles_paddingY":s=~~e[t],a=THEASYS.renderer.vars.get("options.nav_mouse_titles_paddingX");$("#navigation_mouse").find(".pathaki-text").css("padding",s+"px "+a+"px"),this.adjustMouse(),THEASYS.renderer.vars.set("options.nav_mouse_titles_paddingY",s);break;case"nav_mouse_titles_background_color":var s=e[t],i=THEASYS.renderer.vars.get("options.nav_mouse_titles_background_opacity"),n=(r=THEASYS.fn.hexToRgb(s))?r:{r:0,g:0,b:0};$("#navigation_mouse").find(".pathaki-text").css("background","rgba("+n.r+", "+n.g+", "+n.b+", "+i+")"),THEASYS.renderer.vars.set("options.nav_mouse_titles_background_color",s);break;case"nav_mouse_titles_background_opacity":var r,s=parseFloat(e[t],10),i=THEASYS.renderer.vars.get("options.nav_mouse_titles_background_color"),n=(r=THEASYS.fn.hexToRgb(i))?r:{r:0,g:0,b:0};$("#navigation_mouse").find(".pathaki-text").css("background","rgba("+n.r+", "+n.g+", "+n.b+", "+s+")"),THEASYS.renderer.vars.set("options.nav_mouse_titles_background_opacity",s);break;case"nav_mouse_titles_background_border_size":var s=~~e[t],_=THEASYS.renderer.vars.get("options.nav_mouse_titles_background_border_color"),u=THEASYS.renderer.vars.get("options.nav_mouse_titles_background_border_style");$("#navigation_mouse").find(".pathaki-text").css("border",s+"px "+u+" "+_),this.adjustMouse(),THEASYS.renderer.vars.set("options.nav_mouse_titles_background_border_size",s);break;case"nav_mouse_titles_background_border_color":var s=e[t],m=THEASYS.renderer.vars.get("options.nav_mouse_titles_background_border_size"),u=THEASYS.renderer.vars.get("options.nav_mouse_titles_background_border_style");$("#navigation_mouse").find(".pathaki-text").css("border",m+"px "+u+" "+s),THEASYS.renderer.vars.set("options.nav_mouse_titles_background_border_color",s);break;case"nav_mouse_titles_background_border_style":s=e[t],m=THEASYS.renderer.vars.get("options.nav_mouse_titles_background_border_size"),_=THEASYS.renderer.vars.get("options.nav_mouse_titles_background_border_color");$("#navigation_mouse").find(".pathaki-text").css("border",m+"px "+s+" "+_),this.adjustMouse(),THEASYS.renderer.vars.set("options.nav_mouse_titles_background_border_style",s);break;case"nav_mouse_titles_background_radius":s=~~e[t];$("#navigation_mouse").find(".pathaki-text").css("border-radius",s+"px"),THEASYS.renderer.vars.set("options.nav_mouse_titles_background_radius",s);break;case"nav_mouse_titles_placement":s=e[t];this.titles_placement=s,this.adjustMouse(),THEASYS.renderer.vars.set("options.nav_mouse_titles_placement",s);break;case"nav_mouse_auto_scale_start":s=parseFloat(e[t],10);this.mouse_auto_scale_start=s,this.adjustMouse(),THEASYS.renderer.vars.set("options.nav_mouse_auto_scale_start",s);break;case"nav_mouse_hi":s=~~e[t];THEASYS.renderer.vars.set("options.nav_mouse_hi",s);break;case"nav_mouse_si_altp":s=~~e[t];THEASYS.renderer.vars.set("options.nav_mouse_si_altp",s);break;case"nav_mouse_si_an":s=~~e[t];THEASYS.renderer.vars.set("options.nav_mouse_si_an",s)}},THEASYS.theme.modules.navigation_mouse.shiftKey=null,THEASYS.theme.modules.navigation_mouse.eventsMobile=function(){THEASYS.renderer.event.on("hotspotClick_via_anywhereClick",function(e){THEASYS.theme.modules.navigation_mouse.navigating=!0,THEASYS.renderer.cif("executeObjectAction",e)}),THEASYS.renderer.event.on("hotspotClick",function(e){"link_to_panorama"===e.type&&(THEASYS.theme.modules.navigation_mouse.navigating=!0)}),THEASYS.renderer.event.on("loadedPanorama",function(){window.setTimeout(function(){THEASYS.theme.modules.navigation_mouse.comingFromLoadedPanorama=!0,THEASYS.renderer.cif("_runFindClosestHotspot"),THEASYS.renderer.cif("_updatePanoramaPosition")},10)}),THEASYS.renderer.event.on("updatePanoramaPosition",function(){THEASYS.theme.modules.navigation_mouse.comingFromLoadedPanorama&&(THEASYS.theme.modules.navigation_mouse.comingFromLoadedPanorama=!1),THEASYS.theme.modules.navigation_mouse.navigating=!1})},THEASYS.theme.modules.navigation_mouse.events=function(){$("#viewer_wrapper").on("mousemove",function(e){THEASYS.theme.modules.navigation_mouse.shiftKey=e.shiftKey,THEASYS.theme.modules.navigation_mouse.mouseCoords={x:e.clientX,y:e.clientY},THEASYS.theme.modules.navigation_mouse.adjustMouse()}),THEASYS.renderer.event.on("panoramaMouseout",function(e){$("#navigation_mouse").addClass("hiddenMouse")}),THEASYS.renderer.event.on("panoramaMouseenter",function(e){$("#navigation_mouse").removeClass("hiddenMouse")}),THEASYS.renderer.event.on("hotspotClick_via_anywhereClick",function(e){$("#navigation_mouse").hasClass("hidden")||($("#navigation_mouse").addClass("hidden"),THEASYS.theme.modules.navigation_mouse.navigating=!0,THEASYS.renderer.cif("executeObjectAction",e))}),THEASYS.renderer.event.on("hotspotClick",function(e){"link_to_panorama"===e.type&&(THEASYS.theme.modules.navigation_mouse.navigating=!0,$("#navigation_mouse").addClass("hidden"))}),THEASYS.renderer.event.on("loadedPanorama",function(){$("#navigation_mouse").addClass("hidden"),window.setTimeout(function(){THEASYS.theme.modules.navigation_mouse.comingFromLoadedPanorama=!0,THEASYS.renderer.cif("_runFindClosestHotspot"),THEASYS.renderer.cif("_updatePanoramaPosition")},10)}),THEASYS.renderer.event.on("updatePanoramaPosition",function(){THEASYS.theme.modules.navigation_mouse.comingFromLoadedPanorama&&(THEASYS.theme.modules.navigation_mouse.process(),THEASYS.theme.modules.navigation_mouse.comingFromLoadedPanorama=!1),THEASYS.theme.modules.navigation_mouse.navigating=!1,THEASYS.theme.modules.navigation_mouse.adjustMouse()}),THEASYS.renderer.event.on("fovChange",function(){THEASYS.theme.modules.navigation_mouse.adjustMouse()}),THEASYS.renderer.event.on("hotspotIntersection",function(e,t,s){if(THEASYS.theme.modules.navigation_mouse.navigating)return!1;var o=THEASYS.renderer.vars.get("options"),a=~~o.nav_mouse_hi,i=~~o.nav_mouse_si_altp,n=~~o.nav_mouse_si_an,o=!1;a&&(o=!i&&!n||(s?"link_to_panorama"!==s.type||!i:!n)),o&&$("#navigation_mouse").addClass("hiddenAlways")}),THEASYS.renderer.event.on("noHotspotIntersection",function(){$("#navigation_mouse").removeClass("hiddenAlways")}),THEASYS.renderer.event.on("resize",function(){var e=THEASYS.renderer.vars.get("rendererWidth"),t=THEASYS.renderer.vars.get("rendererHeight"),s=$("#navigation_mouse svg");s.attr("width",e),s.attr("height",t),s.attr("viewBox","0 0 "+e+" "+t)}),THEASYS.renderer.event.on("toggleVr",function(e){e?$("#navigation_mouse").addClass("hiddenVr"):$("#navigation_mouse").removeClass("hiddenVr")})},THEASYS.theme.modules.navigation_mouse.process=function(){if(!this.initialized)return!1;var e=THEASYS.renderer.vars.get("options");if(this.mouse=~~e.nav_mouse,!this.mouse)return!1;this.elem.html(""),this.mouse_dowiv=~~e.nav_mouse_dowiv,this.mouse_mode=~~e.nav_mouse_mode,this.mouse_scale=parseFloat(e.nav_mouse_scale,10),this.mouse_auto_scale=~~e.nav_mouse_auto_scale,this.mouse_auto_scale_mode=~~e.nav_mouse_auto_scale_mode,this.mouse_auto_scale_factor=parseFloat(e.nav_mouse_auto_scale_factor,10),this.setOption_isObjectInViewportCheck(),this.mouse_titles=~~e.nav_mouse_titles,this.mouse_titles_text=~~e.nav_mouse_titles_text;var t,s=THEASYS.renderer.panoramas();for(t in s)this.mouse_titles_texts[t]=s[t].title;this.mouse_titles_placement=e.nav_mouse_titles_placement,this.mouse_titles_offsetX=e.nav_mouse_titles_offsetX,this.mouse_titles_offsetY=e.nav_mouse_titles_offsetY;var o=e.nav_mouse_type_d.split("|");e.nav_mouse_color,parseFloat(e.nav_mouse_opacity,10),e.nav_mouse_stroke_color,e.nav_mouse_stroke_width,e.nav_mouse_shadow_color,parseFloat(e.nav_mouse_shadow_opacity,10),e.nav_mouse_circle_color,parseFloat(e.nav_mouse_circle_opacity,10),e.nav_mouse_circle_stroke_color,e.nav_mouse_circle_stroke_width;this.mouse_auto_scale_start=.5;var a=THEASYS.renderer.vars.get("rendererWidth"),i=THEASYS.renderer.vars.get("rendererHeight"),i='<svg version="1.1" width="'+a+'" height="'+i+'" viewBox="0 0 '+a+" "+i+'">';this.hotspots=THEASYS.renderer.vars.get("objects"),i+='<path data-type="circle" class="pathaki pathaki-circle" id="navigation_mouse_circle" fill="'+e.nav_mouse_circle_color+'" fill-rule="nonzero" stroke="'+e.nav_mouse_circle_stroke_color+'" stroke-width="'+e.nav_mouse_circle_stroke_width+'" fill-opacity="'+e.nav_mouse_circle_opacity+'" d="'+o[1]+'"></path>',i+='<path data-type="shadow" class="pathaki pathaki-shadow" id="navigation_mouse_shadow" fill="'+e.nav_mouse_shadow_color+'" fill-rule="nonzero" fill-opacity="'+e.nav_mouse_shadow_opacity+'" d="'+o[0]+'"></path>',i+='<path data-type="shape" class="pathaki pathaki-shape" id="navigation_mouse_shape" fill="'+e.nav_mouse_color+'" fill-rule="nonzero" stroke="'+e.nav_mouse_stroke_color+'" stroke-width="'+e.nav_mouse_stroke_width+'" fill-opacity="'+e.nav_mouse_opacity+'" d="'+o[0]+'"></path>',i+="</svg>",this.elem.html(i).fadeIn(),this.elem_circle=$("#navigation_mouse_circle"),this.elem_shadow=$("#navigation_mouse_shadow"),this.elem_shape=$("#navigation_mouse_shape");o=THEASYS.fn.hexToRgb(e.nav_mouse_titles_background_color),i=o||{r:0,g:0,b:0};html_text="";o='style="font-size:'+~~e.nav_mouse_titles_size+"px;color:"+e.nav_mouse_titles_color+";padding:"+e.nav_mouse_titles_paddingY+"px "+e.nav_mouse_titles_paddingX+"px;background:rgba("+i.r+", "+i.g+", "+i.b+", "+e.nav_mouse_titles_background_opacity+");border-radius:"+e.nav_mouse_titles_background_radius+"px;border:"+e.nav_mouse_titles_background_border_size+"px "+e.nav_mouse_titles_background_border_style+" "+e.nav_mouse_titles_background_border_color+' "';html_text+='<div class="pathaki pathaki-text" '+o+' id="navigation_mouse_text"></div>',this.elem.append(html_text),this.elem_text=$("#navigation_mouse_text"),~~e.nav_mouse_circle&&this.elem.find("path.pathaki-circle").show(),~~e.nav_mouse_shadow&&this.elem.find("path.pathaki-shadow").show(),~~e.nav_mouse_titles&&this.elem.find(".pathaki-text").show();i=THEASYS.renderer.vars.get("vr"),o=THEASYS.renderer.vars.get("gyroscope");i||o||(this.mouse_dowiv&&0==e.panoramas_transition?window.setTimeout(function(){THEASYS.renderer.cif("_runFindClosestHotspot"),THEASYS.renderer.cif("_updatePanoramaPosition")},10):this.elem.removeClass("hidden"))},THEASYS.theme.modules.navigation_mouse.adjustMouse=function(){if(!this.initialized)return!1;if(!this.mouse)return!1;if(!this.mouseCoords)return!1;if(this.navigating)return!1;var e,t,s,o,a,i,n,r,_,u,m,d,l=THEASYS.renderer.vars.get("hotspots_degrees_position_anywhereClick");Object.keys(l).length?(u=THEASYS.renderer.vars.get("closestHotspotId"),s=THEASYS.renderer.vars.get("hotspots_local_position_anywhereClick"),u in l&&u in s?(r=s[u],a=THEASYS.renderer.vars.get("rendererWidth"),n=THEASYS.renderer.vars.get("rendererHeight"),e=0,e=~~this.mouse_mode?l[u]-parseFloat(THEASYS.renderer.vars.get("deg"),10):(m=r.z<1?(i=r.y-this.mouseCoords.y,r.x-this.mouseCoords.x):(i=-r.y+this.mouseCoords.y,-r.x+this.mouseCoords.x),o=Math.atan2(i,m),90+(o*=180/Math.PI)),t=this.elem_shape[0].getBoundingClientRect(),s=a/2,l=n/2,i=this.mouseCoords.x-s,m=this.mouseCoords.y-l,this.elem.css({top:m+"px",left:i+"px"}),o=parseFloat(THEASYS.renderer.vars.get("deg_mouse_vertical"),10),parseFloat(THEASYS.renderer.vars.get("deg_mouse_horizontal"),10),a=1,n=THEASYS.renderer.vars.get("lat"),m=1,i=0,this.mouse_perspective&&(0<(m=10*o)&&(a=0),n<=-80&&(m=1),_=100*this.mouseCoords.x/s,i=this.mouseCoords.x<s?-90- -90*_/100:90- -90*_/100,n<=-80&&(i=0),i<0?i<=-59&&(i=-59):240<=i&&(i=240)),_=this.mouse_scale,this.mouse_auto_scale&&(this.mouse_auto_scale_mode=0,this.mouse_auto_scale_mode?r.z<1?(n=this.mouseCoords.x-r.x,r=this.mouseCoords.y-r.y,1.5<(_=Math.sqrt(n*n+r*r)*this.mouse_auto_scale_factor/100)&&(_=1.5),_<.3&&(_=.3)):_=1:_=Math.abs(m)+this.mouse_auto_scale_factor),this.elem.find("svg").css({transform:"skewX("+i+"deg) scale(1, "+Math.abs(m)+") scale("+_+")"}),this.mouse_titles&&this.elem_text.length&&(m="",this.mouse_titles_text?u in this.hotspots&&(m=this.hotspots[u].data.tooltip):u in this.hotspots&&"action"in this.hotspots[u].data&&"type"in this.hotspots[u].data.action&&"link_to_panorama"===this.hotspots[u].data.action.type&&"panorama_rnd"in this.hotspots[u].data.action&&this.hotspots[u].data.action.panorama_rnd in this.mouse_titles_texts&&(m=this.mouse_titles_texts[this.hotspots[u].data.action.panorama_rnd]),""!==m?(this.elem_text.html(m),text_bcr=this.elem_text[0].getBoundingClientRect(),m=u=0,"top"===this.mouse_titles_placement?(u=l-t.height/2-text_bcr.height-~~this.mouse_titles_offsetY,d=0,d=text_bcr.width>t.width?-(text_bcr.width-t.width)/2:(t.width-text_bcr.width)/2,m=s-t.width/2+d+~~this.mouse_titles_offsetX):"bottom"===this.mouse_titles_placement?(u=l-t.height/2+(text_bcr.height+t.height/2)+~~this.mouse_titles_offsetY,d=0,d=text_bcr.width>t.width?-(text_bcr.width-t.width)/2:(t.width-text_bcr.width)/2,m=s-t.width/2+d+~~this.mouse_titles_offsetX):"left"===this.mouse_titles_placement?(u=l-text_bcr.height/2-~~this.mouse_titles_offsetY,m=s-t.width/2-(text_bcr.width-~~this.mouse_titles_offsetX)):"right"===this.mouse_titles_placement&&(u=l-text_bcr.height/2-~~this.mouse_titles_offsetY,m=s+t.height/2+~~this.mouse_titles_offsetX),this.elem_text.css({top:u,left:m}).fadeIn()):this.elem_text.hide()),a?(this.elem_shape.attr("transform","translate("+s+" "+(200+l-t.height/2/_)+") rotate("+e+")"),this.elem_shadow.attr("transform","translate("+s+" "+(200+l-t.height/2/_+5)+") rotate("+e+")"),this.elem_circle.attr("transform","translate("+s+" "+(200+l-t.height/2/_+6)+") rotate("+e+")"),this.elem.removeClass("hidden hiddenOnLevel")):this.elem.addClass("hiddenOnLevel")):this.elem.addClass("hidden")):this.elem.addClass("hiddenOnLevel")},THEASYS.theme.modules.navigation_mouse.setOption_isObjectInViewportCheck=function(){this.mouse_dowiv?THEASYS.renderer.vars.set("isObjectInViewportCheckAnywhereClick",1):THEASYS.renderer.vars.set("isObjectInViewportCheckAnywhereClick",0)};
